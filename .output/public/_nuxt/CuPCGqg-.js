import{g as S,j as B,c as d,o as l,b as r,k as j,l as T,v as J,a as e,_ as I,p as K,m as E,r as $,n as z,q as Q,s as w,w as h,x as U,y as x,t as m,z as L,d as C,F as M,A,B as D,C as X,D as O,E as Y,G,H,I as Z}from"./CExxHkkw.js";import{g as ee,C as N,_ as W,a as q}from"./BJMQWqSe.js";import{_ as te}from"./DIhAiP4m.js";const se={class:"search-wrapper"},oe=S({__name:"SearchInput",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(f){const s=B(f,"modelValue");return(y,u)=>{const _=T;return l(),d("label",se,[r(_,{class:"search-icon",name:"kc:search"}),j(e("input",{"onUpdate:modelValue":u[0]||(u[0]=n=>s.value=n),placeholder:"Поиск",class:"text-input",type:"text"},null,512),[[J,s.value]])])}}}),ne=I(oe,[["__scopeId","data-v-cdde5605"]]),ie=K("/section_placeholder.svg"),le={class:"card-right"},ae={class:"card-header"},ce={class:"chips"},re={key:0},ue={key:1},de={class:"card-inner"},_e={class:"description"},pe={class:"subcategory"},me={class:"info"},fe={class:"info-text"},ve={class:"info-text"},ge={class:"info-text"},he={class:"time info-text"},ye={class:"time-chips"},xe={class:"more"},be=S({__name:"SectionCard",props:{sectionInfo:{}},setup(f){const s=f,y=E(()=>ee(s.sectionInfo.schedule)),u=$(!1),_=z("titleRef");return Q(_,n=>{u.value=(n==null?void 0:n.clientHeight)==20}),(n,i)=>{const v=N,p=T,o=W,t=te,c=q;return l(),w(c,{class:"card-body"},{default:h(()=>[i[2]||(i[2]=e("div",{class:"img"},[e("img",{src:ie,alt:"section-image"})],-1)),e("div",le,[e("div",ae,[e("div",{ref_key:"titleRef",ref:_,class:U(["title",{"one-line":x(u)}])},[e("h3",null,m(n.sectionInfo.title),1)],2),e("div",ce,[n.sectionInfo.isFirstFree?(l(),w(v,{key:0,color:"pink",type:"outlined",size:"smallest"},{default:h(()=>i[0]||(i[0]=[C(" Первое бесплатно ")])),_:1,__:[0]})):L("",!0),r(v,{color:"pink",size:"smallest"},{default:h(()=>[n.sectionInfo.price==0?(l(),d("span",re,"Бесплатно")):(l(),d("span",ue,m(n.sectionInfo.price)+" руб.",1))]),_:1})])]),e("div",de,[e("div",_e,[e("div",pe,"#"+m(n.sectionInfo.subcategory),1),e("div",me,[r(p,{class:"icon",name:"kc:person"}),e("span",fe,m(n.sectionInfo.minAge)+"-"+m(n.sectionInfo.maxAge)+" лет",1),r(p,{class:"icon",name:"kc:address"}),e("span",ve,m(n.sectionInfo.address),1),r(p,{class:"icon",name:"kc:geo"}),e("span",ge,m(n.sectionInfo.buildingTitle),1),r(p,{class:"icon",name:"kc:clock"}),e("div",he,[e("span",null,m(x(y).join(", ")),1),e("span",ye,[(l(!0),d(M,null,A(n.sectionInfo.timeSlots,(a,g)=>(l(),w(v,{class:"chip",color:"beige",size:"small",key:n.sectionInfo.id+"_"+g+"_timeSlot"},{default:h(()=>[C(m(a),1)]),_:2},1024))),128))])])])]),e("div",xe,[r(t,{to:{name:"sections-id",params:{id:n.sectionInfo.id}}},{default:h(()=>[r(o,{role:"link",color:"brown"},{default:h(()=>i[1]||(i[1]=[C(" Подробнее ")])),_:1,__:[1]})]),_:1},8,["to"])])])])]),_:1,__:[2]})}}}),$e=I(be,[["__scopeId","data-v-a1ce30ff"]]),ke={class:"subheader"},Ce=S({__name:"SectionsGroup",props:{title:{},sections:{}},setup(f){return(s,y)=>{const u=$e;return l(),d("div",null,[e("h2",ke,m(s.title),1),(l(!0),d(M,null,A(s.sections,_=>(l(),w(u,{style:{"margin-bottom":"20px"},key:_.title,"section-info":_},null,8,["section-info"]))),128))])}}}),Ie=I(Ce,[["__scopeId","data-v-06ef1b54"]]),we={class:"combo-box-wrapper"},Me=["value"],Se=S({__name:"ComboBox",props:D({options:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const s=B(f,"modelValue");return(y,u)=>{const _=T;return l(),d("div",we,[j(e("select",{"onUpdate:modelValue":u[0]||(u[0]=n=>s.value=n),class:"combo-box"},[(l(!0),d(M,null,A(y.options,(n,i)=>(l(),d("option",{class:"option",key:i+"_option",value:n.value},m(n.title),9,Me))),128)),O(y.$slots,"default",{},void 0)],512),[[X,s.value]]),r(_,{class:"chevron-icon",name:"kc:chevron-down"})])}}}),Ve=I(Se,[["__scopeId","data-v-0c340d0a"]]),Ee={},Ae={class:"input-wrapper"};function Te(f,s){return l(),d("label",Ae,[s[0]||(s[0]=e("input",{class:"checkbox",type:"checkbox"},null,-1)),e("span",null,[O(f.$slots,"default",{},void 0)])])}const Ue=I(Ee,[["render",Te],["__scopeId","data-v-9ce1cbee"]]),Be={class:"section-filter"},Fe={class:"header-left"},Le={class:"header-title"},Re={class:"amount-sum"},je={key:0},ze=["onClick"],De={class:"list-item-title"},Oe={class:"list-item-amount"},Ge={key:0},He=S({__name:"SectionFilter",props:{title:{},categoriesAmount:{}},emits:["change-selection"],setup(f,{emit:s}){Y(a=>({"0c84392f":x(i)}));const y=f,u=s,_=E(()=>y.categoriesAmount.reduce((a,g)=>a+g.amount,0)),n=z("list"),i=$(null),v=$(!0),p=G([]),o=E(()=>_.value==0);H(()=>{i.value=`${n.value.offsetHeight}px`,setTimeout(()=>{v.value=!o.value},0)});function t(a){const g=p.indexOf(a);g!=-1?p.splice(g,1):p.push(a),u("change-selection",p)}function c(){v.value=!v.value}return(a,g)=>{const k=T;return l(),d("div",Be,[e("div",{onClick:c,class:"header"},[e("div",Fe,[e("span",Le,m(a.title),1),e("span",Re,[x(o)?L("",!0):(l(),d("span",je,m(x(_)),1))])]),r(k,{class:U([{opened:x(v)},"chevron-icon"]),name:"kc:chevron-down"},null,8,["class"])]),e("ul",{ref:"list",class:U(["list",{opened:x(v),closed:!x(v)}])},[(l(!0),d(M,null,A(a.categoriesAmount,(V,F)=>(l(),d("li",{onClick:R=>t(V.title),class:U(["list-item",{selected:x(p).includes(V.title)}]),key:F+"_categoryAmount"},[e("span",De,m(V.title),1),e("span",Oe,[x(o)?L("",!0):(l(),d("span",Ge,m(V.amount),1))])],10,ze))),128))],2)])}}}),Ne=I(He,[["__scopeId","data-v-b5cba42a"]]),We={style:{"flex-grow":"1"}},qe={style:{display:"flex",gap:"20px","flex-wrap":"wrap"}},Pe={style:{display:"grid","grid-template-columns":"1fr","grid-auto-rows":"min-content",gap:"15px"}},Je=S({__name:"TheFilters",props:D({sectionAmounts:{}},{age:{},ageModifiers:{},categories:{},categoriesModifiers:{}}),emits:["update:age","update:categories"],setup(f){const s=B(f,"age"),y=B(f,"categories"),u=$(new Map);function _(n,i){u.value.set(n,[...i]),y.value=Array.from(u.value.values()).flat()}return(n,i)=>{const v=Ve,p=Ue,o=Ne,t=q;return l(),d(M,null,[i[6]||(i[6]=e("div",{class:"subheader"},"Фильтры",-1)),r(t,{style:{padding:"10px 20px"}},{default:h(()=>[e("div",We,[i[3]||(i[3]=e("div",{class:"filter-category"}," Возраст ",-1)),r(v,{modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=c=>s.value=c),style:{width:"100%"},options:[{value:"null",title:"Любой"},{value:"1",title:"1 год"},{value:"2",title:"2 года"},{value:"3",title:"3 года"},{value:"4",title:"4 года"},{value:"6",title:"6 лет"},{value:"7",title:"7 лет"},{value:"5",title:"5 лет"},{value:"8",title:"8 лет"},{value:"9",title:"9 лет"},{value:"10",title:"10 лет"},{value:"11",title:"11 лет"},{value:"12",title:"12 лет"},{value:"13",title:"13 лет"},{value:"14",title:"14 лет"},{value:"15",title:"15 лет"},{value:"16",title:"16 лет"},{value:"17",title:"17 лет"},{value:"18",title:"18 лет"}]},null,8,["modelValue"]),i[4]||(i[4]=e("div",{style:{"margin-top":"15px"},class:"filter-category"}," Пол ",-1)),e("div",qe,[r(p,null,{default:h(()=>i[1]||(i[1]=[C("Мужской")])),_:1,__:[1]}),r(p,null,{default:h(()=>i[2]||(i[2]=[C("Женский")])),_:1,__:[2]})]),i[5]||(i[5]=e("div",{style:{"margin-top":"15px"},class:"filter-category"}," Каталог ",-1)),e("div",Pe,[(l(!0),d(M,null,A(n.sectionAmounts,c=>(l(),w(o,{onChangeSelection:a=>{_(c.title,a)},title:c.title,"categories-amount":c.subcategories},null,8,["onChangeSelection","title","categories-amount"]))),256))])])]),_:1})],64)}}}),Ke=I(Je,[["__scopeId","data-v-080dfd55"]]),Qe={style:{display:"flex","justify-content":"space-between","margin-bottom":"20px"}},Xe={style:{display:"flex",gap:"20px"}},Ye={style:{display:"flex",gap:"40px"}},Ze={style:{"flex-grow":"1"}},et={style:{width:"330px"}},tt=S({__name:"index",setup(f){const s={price:$("any"),title:$(""),age:$("null"),categories:$([])},y=G([]),u=E(()=>[...y].filter(o=>v.every(t=>t(o)))),_=$(new Map),n=E(()=>{const o=new Map;_.value.forEach((c,a)=>{o.set(a,{title:a,subcategories:[]}),c.forEach(g=>{var k;(k=o.get(a))==null||k.subcategories.push({title:g,amount:0})})}),u.value.forEach(c=>{var g;let a=(g=o.get(c.category))==null?void 0:g.subcategories.find(k=>k.title==c.subcategory);a!=null&&a.amount++});const t=[];return o.forEach(c=>{t.push(c)}),t}),i=E(()=>{const o=new Map;return u.value.forEach(t=>{var c;o.has(t.category)?(c=o.get(t.category))==null||c.push(t):o.set(t.category,[t])}),o}),v=[o=>{switch(s.price.value){case"any":return!0;case"free":return o.price==0;case"paid":return o.price>0}},o=>o.title.toLowerCase().includes(s.title.value.toLowerCase()),o=>s.age.value=="null"?!0:s.age.value>=o.minAge&&s.age.value<=o.maxAge,o=>s.categories.value.length==0?!0:s.categories.value.includes(o.subcategory)];function p(o){s.price.value=o}return H(async()=>{$fetch("/fake_categories.json").then(o=>{o.forEach(t=>{_.value.set(t.title,t.subcategories)})}),$fetch("/fake_sections.json").then(o=>{y.push(...o)})}),(o,t)=>{const c=ne,a=N,g=T,k=W,V=Ie,F=Ke,R=Z;return l(),w(R,{class:"main-container"},{default:h(()=>[e("div",null,[e("div",Qe,[e("div",Xe,[r(c,{modelValue:s.title.value,"onUpdate:modelValue":t[0]||(t[0]=b=>s.title.value=b)},null,8,["modelValue"]),r(a,{onClick:t[1]||(t[1]=b=>p("any")),class:"price-chip",disabled:s.price.value!="any",color:"white"},{default:h(()=>t[6]||(t[6]=[C(" Все ")])),_:1,__:[6]},8,["disabled"]),r(a,{onClick:t[2]||(t[2]=b=>p("paid")),class:"price-chip",disabled:s.price.value!="paid",color:"white"},{default:h(()=>t[7]||(t[7]=[C(" Платные ")])),_:1,__:[7]},8,["disabled"]),r(a,{onClick:t[3]||(t[3]=b=>p("free")),class:"price-chip",disabled:s.price.value!="free",color:"white"},{default:h(()=>t[8]||(t[8]=[C(" Бесплатные ")])),_:1,__:[8]},8,["disabled"])]),r(k,{style:{display:"flex","align-items":"center"}},{default:h(()=>[t[9]||(t[9]=e("span",null,"На карте  ",-1)),r(g,{style:{position:"relative",top:"-1px"},name:"kc:geo"})]),_:1,__:[9]})])]),e("div",Ye,[e("main",Ze,[(l(!0),d(M,null,A(x(i),(b,P)=>(l(),w(V,{key:P+"_sectionGroup",title:b[0],sections:b[1]},null,8,["title","sections"]))),128))]),e("aside",et,[r(F,{age:s.age.value,"onUpdate:age":t[4]||(t[4]=b=>s.age.value=b),categories:s.categories.value,"onUpdate:categories":t[5]||(t[5]=b=>s.categories.value=b),"section-amounts":x(n)},null,8,["age","categories","section-amounts"])])])]),_:1})}}}),it=I(tt,[["__scopeId","data-v-e125361f"]]);export{it as default};
